#!/bin/bash

# Agents to KEEP (new structure)
KEEP_AGENTS=(
    "PHPMaster.md"
    "FrontendDeveloper.md"
    "BackendDeveloper.md"
    "APIArchitect.md"
    "DatabaseOptimizer.md"
    "ContainerSpecialist.md"
    "ServerManager.md"
    "CICDPipeline.md"
    "PHPCodeQuality.md"
    "TestingSpecialist.md"
    "SecurityGuard.md"
    "WorkflowCoordinator.md"
    "DocumentationWriter.md"
    "wordpress-expert.md"
    "laravel-specialist.md"
    "debugger.md"
    "git-workflow.md"
    "browser-automation-tools.md"
    "context-fetcher.md"
)

# Agents to DELETE (redundant/not in stack)
DELETE_AGENTS=(
    # AI/ML (not in stack)
    "ai-engineer.md"
    "ml-engineer.md"
    "machine-learning-engineer.md"
    "mlops-engineer.md"
    "llm-architect.md"
    "nlp-engineer.md"
    "prompt-engineer.md"
    
    # Mobile (not in stack)
    "mobile-developer.md"
    "mobile-app-developer.md"
    
    # Business/Analysis (not in stack)
    "business-analyst.md"
    "market-researcher.md"
    "competitive-analyst.md"
    "trend-analyst.md"
    "sales-engineer.md"
    "customer-success-manager.md"
    "content-marketer.md"
    "product-manager.md"
    "project-manager.md"
    "scrum-master.md"
    "legal-advisor.md"
    "risk-manager.md"
    "quant-analyst.md"
    
    # Unused Frameworks
    "django-developer.md"
    "rails-expert.md"
    
    # Redundant (merged into new agents)
    "php-pro.md"
    "backend-developer.md"
    "frontend-developer.md"
    "ui-engineer.md"
    "backend-typescript-architect.md"
    "python-backend-engineer.md"
    "python-pro.md"
    "javascript-pro.md"
    "typescript-pro.md"
    "fullstack-developer.md"
    "react-specialist.md"
    "nextjs-developer.md"
    "vue-expert.md"
    "angular-architect.md"
    "api-designer.md"
    "graphql-architect.md"
    "api-documenter.md"
    "database-specialist.md"
    "database-administrator.md"
    "database-optimizer.md"
    "sql-pro.md"
    "postgres-pro.md"
    "docker-specialist.md"
    "kubernetes-specialist.md"
    "devops-engineer.md"
    "deployment-engineer.md"
    "devops-incident-responder.md"
    "build-engineer.md"
    "code-reviewer.md"
    "senior-code-reviewer.md"
    "refactoring-specialist.md"
    "qa-expert.md"
    "test-automator.md"
    "test-runner.md"
    "security-engineer.md"
    "security-auditor.md"
    "penetration-tester.md"
    "compliance-auditor.md"
    "multi-agent-coordinator.md"
    "workflow-orchestrator.md"
    "task-distributor.md"
    "agent-organizer.md"
    "knowledge-synthesizer.md"
    "technical-writer.md"
    "documentation-engineer.md"
    
    # Others not needed
    "debugging-specialist.md"
    "error-detective.md"
    "error-coordinator.md"
    "git-workflow-manager.md"
    "terraform-engineer.md"
    "platform-engineer.md"
    "sre-engineer.md"
    "chaos-engineer.md"
    "incident-responder.md"
    "cli-developer.md"
    "embedded-systems.md"
    "iot-engineer.md"
    "fintech-engineer.md"
    "payment-integration.md"
    "legacy-modernizer.md"
    "dependency-manager.md"
    "tooling-engineer.md"
    "performance-engineer.md"
    "performance-monitor.md"
    "dx-optimizer.md"
    "data-analyst.md"
    "data-engineer.md"
    "data-scientist.md"
    "data-researcher.md"
    "ux-researcher.md"
    "accessibility-tester.md"
    "cloud-architect.md"
    "network-engineer.md"
    "browser-debugger.md"
    "file-creator.md"
    "date-checker.md"
    "context-manager.md"
    "architect-reviewer.md"
    "microservices-architect.md"
    "websocket-engineer.md"
    "search-specialist.md"
    "research-analyst.md"
)

echo "Starting cleanup of redundant agents..."
echo "Keeping ${#KEEP_AGENTS[@]} agents"
echo "Deleting ${#DELETE_AGENTS[@]} redundant agents"
echo ""

DELETED_COUNT=0
for agent in "${DELETE_AGENTS[@]}"; do
    file="$HOME/.claude/agents/$agent"
    if [ -f "$file" ]; then
        rm "$file"
        echo "âœ“ Deleted $agent"
        ((DELETED_COUNT++))
    fi
done

echo ""
echo "Cleanup complete!"
echo "Deleted $DELETED_COUNT files"
echo ""
echo "Final agent count:"
ls ~/.claude/agents/*.md | wc -l